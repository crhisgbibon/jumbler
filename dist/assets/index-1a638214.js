var Y=Object.defineProperty;var T=(e,n,t)=>n in e?Y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var E=(e,n,t)=>(T(e,typeof n!="symbol"?n+"":n,t),t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();function F(){let e=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",e+"px")}window.addEventListener("DOMContentLoaded",F);window.addEventListener("resize",F);window.addEventListener("orientationchange",F);class H{constructor(){E(this,"frag");E(this,"row",0);E(this,"column",0);E(this,"index",0)}}const O=document.getElementById("jumbleDiv"),a=document.getElementById("ctx"),m=a.getContext("2d"),W=document.getElementById("completed"),p=document.getElementById("originalImg"),D=document.getElementById("rows"),h=document.getElementById("columns");document.getElementById("myfile");const C=document.getElementById("uploadedFiles");C.onchange=function(){X()};const A=document.getElementById("triggerSelectFileButton"),S=document.getElementById("fileupload");S.onchange=function(){z()};document.getElementById("clearFileSelectButton");A.onclick=function(){S.click()};const v=document.getElementById("originalButton");v.onclick=function(){U()};const N=document.getElementById("jumbleButton");N.onclick=function(){K()};const k=document.getElementById("settingsButton");k.onclick=function(){R()};const q=document.getElementById("loadSelected");q.onclick=function(){X(),R()};const x=document.getElementById("settingsMenu");x.style.display="none";let s,f,P,d,g,w=[],l=[],y=[],M=new Image,b=!1;function R(){b=!b,b?x.style.display="":x.style.display="none"}function z(){let e=S.files;function n(t){if(window.File&&window.FileReader&&window.FileList&&window.Blob){let r=new FileReader;r.addEventListener("load",function(){let o=document.createElement("img");o.src=this.result,y.push(o);let i=document.createElement("option");i.value=y.length-1,i.innerHTML=t.name,C.appendChild(i)},!1),r.readAsDataURL(t)}}if(e.length>0)for(let t=0;t<e.length;t++)n(e[t])}function X(){y.Length!=0&&(M.src=y[C.value].src,p.dataset.state="jumbled",m.drawImage(M,0,0),J(M.src))}function J(e){let n=document.createElement("img");if(y.Length==0||e==null||e=="")return;n.src=e,a.width=n.width,a.height=n.height;let t=O.offsetWidth*.75,r=O.offsetHeight*.75,o=n.width,i=n.height;if(o>t){let c=100/a.width*t,u=a.height/100*c;n.width=t,n.height=u,a.width=t,a.height=u,m.drawImage(n,0,0,t,u)}else if(i>r){let c=100/a.height*r,u=a.width/100*c;n.width=u,n.height=r,a.width=u,a.height=r,m.drawImage(n,0,0,u,r)}else m.drawImage(n,0,0,n.width,n.height);if(s=n.width/D.value,f=n.height/h.value,P=D.value*h.value,l.length=0,w.length=0,a.width!==0){for(let c=0;c<D.value;c++)for(let u=0;u<h.value;u++){let L=m.getImageData(c*s,u*f,s,f),I=new H;I.index=l.length,I.row=c,I.column=u,I.frag=L,l.push(I);let B=new H;B.index=l.length,B.row=c,B.column=u,B.frag=L,w.push(B)}p.state="jumbled"}}function K(){if(y.Length==0||l.length==0)return;let e=[],n=[];for(let t=0;t<P;t++)e.push(t);for(let t=0;t<D.value;t++)for(let r=0;r<h.value;r++){let o=Math.floor(Math.random()*e.length);n.push(l[e[o]].frag),e.splice(o,1)}for(let t=0;t<n.length;t++)l[t].frag=n[t],m.putImageData(l[t].frag,l[t].row*s,l[t].column*f);j(),p.dataset.state="original"}function U(){if(y.Length!=0){if(p.dataset.state==="original"){for(let e=0;e<w.length;e++)m.putImageData(w[e].frag,w[e].row*s,w[e].column*f);p.dataset.state="jumbled",v.style.transform="rotate(90deg)",console.log(v.style.transform)}else if(p.dataset.state==="jumbled"){for(let e=0;e<l.length;e++)m.putImageData(l[e].frag,l[e].row*s,l[e].column*f);p.dataset.state="original",v.style.transform="",console.log(v.style.transform)}}}function j(){let e=0;for(let t=0;t<l.length;t++)l[t].frag===w[t].frag&&e++;let n=Math.floor(100/l.length*e);W.innerHTML=n.toString()+"%"}a.onmousedown=function(e){e.preventDefault();let n=a.getBoundingClientRect(),t=e.clientX-n.left,r=e.clientY-n.top,o=Math.floor(t/s),i=Math.floor(r/f);d=o*h.value+i};a.onmouseup=function(e){e.preventDefault();let n=a.getBoundingClientRect(),t=e.clientX-n.left,r=e.clientY-n.top,o=Math.floor(t/s),i=Math.floor(r/f);if(g=o*h.value+i,d!=g){m.putImageData(l[g].frag,l[d].row*s,l[d].column*f),m.putImageData(l[d].frag,l[g].row*s,l[g].column*f);let c=l[d].frag,u=l[g].frag;l[d].frag=u,l[g].frag=c}j()};a.ontouchstart=function(e){if(e.preventDefault(),e.touches!=null){let n=a.getBoundingClientRect(),t=e.touches[0]||e.changedTouches[0],r=t.pageX-n.left,o=t.pageY-n.top,i=Math.floor(r/s),c=Math.floor(o/f);d=i*h.value+c}};a.ontouchend=function(e){if(e.preventDefault(),e.touches!=null){let n=a.getBoundingClientRect(),t=e.touches[0]||e.changedTouches[0],r=t.pageX-n.left,o=t.pageY-n.top,i=Math.floor(r/s),c=Math.floor(o/f);if(g=i*h.value+c,d!=g){m.putImageData(l[g].frag,l[d].row*s,l[d].column*f),m.putImageData(l[d].frag,l[g].row*s,l[g].column*f);let u=l[d].frag,L=l[g].frag;l[d].frag=L,l[g].frag=u}j()}};
